<div class="min-h-screen">
  <div class="auth-form">
    <h1>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š</h1>

    <%= form_with(model: @user, url: profile_path, method: :patch, data: { turbo: false }) do |form| %>
      <% if @user.errors.any? %>
        <div class="error-messages">
          <h3><%= pluralize(@user.errors.count, "å€‹ã®ã‚¨ãƒ©ãƒ¼") %>ãŒã‚ã‚Šã¾ã™:</h3>
          <ul>
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="profile-section">
        <h2>åŸºæœ¬æƒ…å ±</h2>

        <% if @user.oauth_user? %>
          <div class="oauth-info-box">
            <p><strong>ğŸ“± Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ä¸­</strong></p>
            <p class="form-text text-muted">ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ Google èªè¨¼ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ Google ã§ç®¡ç†ã•ã‚Œã¾ã™ã€‚</p>
          </div>
        <% end %>

        <div class="form-group">
          <%= form.label :username, "ãƒ¦ãƒ¼ã‚¶ãƒ¼å" %>
          <%= form.text_field :username, class: "form-control", disabled: true %>
          <small class="form-text text-muted">ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯å¤‰æ›´ã§ãã¾ã›ã‚“</small>
        </div>

        <div class="form-group">
          <%= form.label :nickname, "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰" %>
          <%= form.text_field :nickname, class: "form-control", placeholder: "è¡¨ç¤ºåã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™" %>
          <small class="form-text text-muted">æœªå…¥åŠ›ã®å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒè¡¨ç¤ºã•ã‚Œã¾ã™</small>
        </div>

        <% unless @user.oauth_user? %>
          <div class="form-group">
            <%= form.label :email, "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰" %>
            <%= form.email_field :email, class: "form-control", placeholder: "email@example.com" %>
          </div>
        <% else %>
          <div class="form-group">
            <%= form.label :email, "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" %>
            <%= form.email_field :email, class: "form-control", disabled: true %>
            <small class="form-text text-muted">Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¤‰æ›´ã§ãã¾ã›ã‚“</small>
          </div>
        <% end %>
      </div>

      <% unless @user.oauth_user? %>
        <div class="profile-section">
          <h2>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</h2>
          <p class="form-text text-muted">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®é …ç›®ã‚’ç©ºæ¬„ã®ã¾ã¾ã«ã—ã¦ãã ã•ã„ã€‚</p>

          <div class="form-group">
            <%= form.label :current_password, "ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" %>
            <%= form.password_field :current_password, class: "form-control", placeholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯å…¥åŠ›" %>
          </div>

          <div class="form-group">
            <%= form.label :password, "æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" %>
            <%= form.password_field :password, class: "form-control", placeholder: "6æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›" %>
          </div>

          <div class="form-group">
            <%= form.label :password_confirmation, "æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰" %>
            <%= form.password_field :password_confirmation, class: "form-control", placeholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›" %>
          </div>
        </div>
      <% end %>

      <div class="form-actions">
        <%= form.submit "æ›´æ–°", class: "btn btn-primary" %>
        <%= link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", stages_path, class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>

<style>
  .oauth-info-box {
    background-color: #e8f4fd;
    border: 1px solid #b3d9f2;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1.5rem;
  }

  .oauth-info-box p {
    margin: 0.5rem 0;
  }

  .oauth-info-box strong {
    color: #1a73e8;
  }

  .profile-section {
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #e0e0e0;
  }

  .profile-section:last-of-type {
    border-bottom: none;
  }

  .profile-section h2 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #333;
  }

  .btn-secondary {
    background-color: #6c757d;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    transition: background-color 0.3s;
    margin-left: 0.5rem;
  }

  .btn-secondary:hover {
    background-color: #5a6268;
  }
</style>

